<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900">
  <!-- Title -->
  <text x="700" y="40" font-size="26" font-weight="bold" text-anchor="middle" fill="#232f3e">
    AWS Infrastructure Architecture
  </text>

  <!-- AWS Region -->
  <rect x="50" y="80" width="1300" height="780" fill="#fff" stroke="#ff9900" stroke-width="5" rx="20"/>
  <text x="100" y="120" font-size="20" font-weight="bold" fill="#ff9900">
    AWS Region: ap-northeast-2 (Seoul)
  </text>

  <!-- VPC -->
  <rect x="100" y="150" width="1200" height="680" fill="#f0f8ff" stroke="#0066cc" stroke-width="4" rx="15"/>
  <text x="150" y="190" font-size="18" font-weight="bold" fill="#0066cc">
    VPC (Virtual Private Cloud)
  </text>
  <text x="150" y="210" font-size="13" fill="#666">CIDR: 172.31.0.0/16</text>

  <!-- Availability Zone 1 -->
  <g id="az1">
    <rect x="150" y="240" width="520" height="550" fill="#e8f5e9" stroke="#4caf50" stroke-width="3" rx="10"/>
    <text x="200" y="275" font-size="16" font-weight="bold" fill="#2e7d32">
      Availability Zone: ap-northeast-2a
    </text>

    <!-- Public Subnet -->
    <rect x="180" y="300" width="460" height="250" fill="#fff" stroke="#4caf50" stroke-width="3" rx="8"/>
    <text x="230" y="330" font-size="14" font-weight="bold" fill="#2e7d32">
      Public Subnet (172.31.1.0/24)
    </text>

    <!-- Internet Gateway -->
    <rect x="210" y="350" width="150" height="60" fill="#81c784" stroke="#2e7d32" stroke-width="2" rx="5"/>
    <text x="285" y="375" font-size="13" font-weight="bold" text-anchor="middle" fill="#fff">
      Internet Gateway
    </text>
    <text x="285" y="395" font-size="11" text-anchor="middle" fill="#fff">igw-xxxxxxxx</text>

    <!-- EC2 Instance -->
    <rect x="210" y="430" width="400" height="100" fill="#fff3e0" stroke="#ff6f00" stroke-width="3" rx="8"/>
    <text x="410" y="455" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
      EC2 Instance (t2.micro)
    </text>

    <rect x="230" y="470" width="360" height="50" fill="#fff" stroke="#ff9800" stroke-width="2" rx="5"/>
    <text x="240" y="490" font-size="11" fill="#e65100">Instance ID: i-xxxxxxxxx</text>
    <text x="240" y="505" font-size="11" fill="#e65100">Private IP: 172.31.1.10</text>
    <text x="450" y="490" font-size="11" fill="#e65100">OS: Ubuntu 20.04</text>
    <text x="450" y="505" font-size="11" fill="#e65100">Storage: 30GB EBS</text>

    <!-- Private Subnet -->
    <rect x="180" y="570" width="460" height="200" fill="#fff" stroke="#1976d2" stroke-width="3" rx="8"/>
    <text x="230" y="600" font-size="14" font-weight="bold" fill="#0d47a1">
      Private Subnet (172.31.2.0/24)
    </text>

    <!-- RDS Primary -->
    <rect x="210" y="620" width="400" height="130" fill="#e3f2fd" stroke="#1976d2" stroke-width="3" rx="8"/>
    <text x="410" y="645" font-size="14" font-weight="bold" text-anchor="middle" fill="#0d47a1">
      RDS MySQL Primary (db.t2.micro)
    </text>

    <rect x="230" y="660" width="360" height="80" fill="#fff" stroke="#1976d2" stroke-width="2" rx="5"/>
    <text x="240" y="680" font-size="10" fill="#0d47a1">DB Instance: library-db</text>
    <text x="240" y="695" font-size="10" fill="#0d47a1">Engine: MySQL 8.0.35</text>
    <text x="240" y="710" font-size="10" fill="#0d47a1">Storage: 20GB gp2</text>
    <text x="240" y="725" font-size="10" fill="#0d47a1">Private IP: 172.31.2.20</text>

    <text x="450" y="680" font-size="10" fill="#0d47a1">Port: 3306</text>
    <text x="450" y="695" font-size="10" fill="#0d47a1">Multi-AZ: No</text>
    <text x="450" y="710" font-size="10" fill="#0d47a1">Backup: 7 days</text>
    <text x="450" y="725" font-size="10" fill="#0d47a1">Encryption: Yes</text>
  </g>

  <!-- Availability Zone 2 (for future scaling) -->
  <g id="az2">
    <rect x="730" y="240" width="520" height="550" fill="#fce4ec" stroke="#c2185b" stroke-width="3" stroke-dasharray="10,5" rx="10"/>
    <text x="780" y="275" font-size="16" font-weight="bold" fill="#880e4f">
      Availability Zone: ap-northeast-2c (Future)
    </text>

    <!-- Private Subnet for Standby -->
    <rect x="760" y="300" width="460" height="250" fill="#fff" stroke="#c2185b" stroke-width="2" stroke-dasharray="5,5" rx="8"/>
    <text x="810" y="330" font-size="14" font-weight="bold" fill="#880e4f">
      Private Subnet (172.31.3.0/24)
    </text>

    <!-- RDS Standby (Optional) -->
    <rect x="790" y="360" width="400" height="120" fill="#f8bbd0" stroke="#c2185b" stroke-width="2" stroke-dasharray="5,5" rx="8"/>
    <text x="990" y="390" font-size="13" font-weight="bold" text-anchor="middle" fill="#880e4f">
      RDS Standby (Multi-AZ)
    </text>
    <text x="990" y="410" font-size="11" text-anchor="middle" fill="#880e4f">
      Available with Paid Plan
    </text>

    <rect x="810" y="425" width="360" height="45" fill="#fff" stroke="#c2185b" stroke-width="1" stroke-dasharray="3,3" rx="5"/>
    <text x="820" y="445" font-size="10" fill="#880e4f">Automatic failover</text>
    <text x="820" y="460" font-size="10" fill="#880e4f">Synchronous replication</text>
  </g>

  <!-- Elastic IP -->
  <g id="eip">
    <rect x="400" y="150" width="180" height="60" fill="#4caf50" stroke="#2e7d32" stroke-width="3" rx="8"/>
    <text x="490" y="175" font-size="13" font-weight="bold" text-anchor="middle" fill="#fff">
      Elastic IP
    </text>
    <text x="490" y="195" font-size="12" text-anchor="middle" fill="#fff">3.35.xxx.xxx</text>
  </g>

  <!-- Security Groups -->
  <g id="security-groups">
    <rect x="1330" y="150" width="320" height="680" fill="#f3e5f5" stroke="#9c27b0" stroke-width="4" rx="10"/>
    <text x="1380" y="185" font-size="16" font-weight="bold" fill="#6a1b9a">
      Security Groups
    </text>

    <!-- EC2 Security Group -->
    <rect x="1360" y="210" width="260" height="200" fill="#fff" stroke="#9c27b0" stroke-width="3" rx="5"/>
    <text x="1490" y="235" font-size="14" font-weight="bold" text-anchor="middle" fill="#6a1b9a">
      EC2 Security Group
    </text>
    <text x="1370" y="255" font-size="11" fill="#6a1b9a">sg-ec2-library</text>

    <rect x="1375" y="270" width="230" height="125" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1" rx="3"/>
    <text x="1490" y="290" font-size="12" font-weight="bold" text-anchor="middle" fill="#6a1b9a">
      Inbound Rules
    </text>
    <text x="1385" y="310" font-size="10" fill="#6a1b9a">SSH (22) - Source: My IP</text>
    <text x="1385" y="327" font-size="10" fill="#6a1b9a">HTTP (8081) - Source: 0.0.0.0/0</text>
    <text x="1385" y="344" font-size="10" fill="#6a1b9a">HTTPS (443) - Source: 0.0.0.0/0</text>
    <text x="1490" y="365" font-size="12" font-weight="bold" text-anchor="middle" fill="#6a1b9a">
      Outbound Rules
    </text>
    <text x="1385" y="380" font-size="10" fill="#6a1b9a">All Traffic - Destination: 0.0.0.0/0</text>

    <!-- RDS Security Group -->
    <rect x="1360" y="430" width="260" height="150" fill="#fff" stroke="#9c27b0" stroke-width="3" rx="5"/>
    <text x="1490" y="455" font-size="14" font-weight="bold" text-anchor="middle" fill="#6a1b9a">
      RDS Security Group
    </text>
    <text x="1370" y="475" font-size="11" fill="#6a1b9a">sg-rds-library</text>

    <rect x="1375" y="490" width="230" height="75" fill="#f3e5f5" stroke="#9c27b0" stroke-width="1" rx="3"/>
    <text x="1490" y="510" font-size="12" font-weight="bold" text-anchor="middle" fill="#6a1b9a">
      Inbound Rules
    </text>
    <text x="1385" y="530" font-size="10" fill="#6a1b9a">MySQL (3306)</text>
    <text x="1385" y="547" font-size="10" fill="#6a1b9a">Source: sg-ec2-library</text>

    <!-- IAM Role -->
    <rect x="1360" y="600" width="260" height="110" fill="#fff" stroke="#ff9800" stroke-width="3" rx="5"/>
    <text x="1490" y="625" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
      IAM Role (Optional)
    </text>

    <rect x="1375" y="640" width="230" height="55" fill="#fff3e0" stroke="#ff9800" stroke-width="1" rx="3"/>
    <text x="1385" y="660" font-size="10" fill="#e65100">EC2RoleForSSM</text>
    <text x="1385" y="677" font-size="10" fill="#e65100">- CloudWatch Logs</text>
    <text x="1385" y="690" font-size="10" fill="#e65100">- S3 Access (backups)</text>

    <!-- CloudWatch -->
    <rect x="1360" y="730" width="260" height="80" fill="#fff" stroke="#00bcd4" stroke-width="3" rx="5"/>
    <text x="1490" y="755" font-size="14" font-weight="bold" text-anchor="middle" fill="#006064">
      CloudWatch
    </text>
    <text x="1370" y="775" font-size="10" fill="#006064">- Billing Alerts</text>
    <text x="1370" y="790" font-size="10" fill="#006064">- EC2 Metrics (CPU, Network)</text>
  </g>

  <!-- Internet -->
  <g id="internet">
    <ellipse cx="700" y="60" rx="100" ry="30" fill="#81d4fa" stroke="#0277bd" stroke-width="3"/>
    <text x="700" y="70" font-size="16" font-weight="bold" text-anchor="middle" fill="#01579b">
      Internet
    </text>
  </g>

  <!-- Connections -->
  <!-- Internet to EIP -->
  <path d="M 700 90 L 490 150" stroke="#4caf50" stroke-width="4" fill="none" marker-end="url(#arrow1)"/>

  <!-- EIP to EC2 -->
  <path d="M 490 210 L 410 430" stroke="#4caf50" stroke-width="4" fill="none" marker-end="url(#arrow1)"/>

  <!-- EC2 to RDS -->
  <path d="M 410 530 L 410 620" stroke="#1976d2" stroke-width="4" fill="none" marker-end="url(#arrow2)"/>
  <text x="420" y="580" font-size="11" fill="#0d47a1" font-weight="bold">JDBC:3306</text>

  <!-- Security Group associations -->
  <path d="M 610 480 L 1360 320" stroke="#9c27b0" stroke-width="2" stroke-dasharray="5,5" fill="none"/>
  <path d="M 610 685 L 1360 490" stroke="#9c27b0" stroke-width="2" stroke-dasharray="5,5" fill="none"/>

  <!-- Labels -->
  <g id="labels">
    <rect x="100" y="850" width="1200" height="30" fill="#f5f5f5" stroke="#999" stroke-width="1" rx="3"/>
    <text x="110" y="870" font-size="11" fill="#333">
      ✓ Free Tier: EC2 t2.micro (750h/mo) | RDS db.t2.micro (750h/mo) | 30GB EBS | Elastic IP (1개)
    </text>
    <text x="900" y="870" font-size="11" fill="#d32f2f" font-weight="bold">
      Monthly Cost: $0 (within Free Tier limits)
    </text>
  </g>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#4caf50"/>
    </marker>
    <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#1976d2"/>
    </marker>
  </defs>
</svg>
